# =============================================================================
# Order Processor Service - Default Configuration
# =============================================================================
# This is the base configuration file for the Order Processor Service
# Environment-specific configurations override these defaults

# =============================================================================
# Spring Application Configuration
# =============================================================================
spring.application.name=order-processor-service
spring.application.version=1.0.0

# =============================================================================
# Server Configuration
# =============================================================================
server.port=8083
server.servlet.context-path=/api

# =============================================================================
# Profile Configuration
# =============================================================================
# Default profile - can be overridden by environment variables or command line
spring.profiles.active=development

# =============================================================================
# Common Database Configuration
# =============================================================================
# Database driver configuration
spring.datasource.driver-class-name=org.postgresql.Driver

# =============================================================================
# Common JPA Configuration
# =============================================================================
# Hibernate dialect for PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# =============================================================================
# Common Flyway Configuration
# =============================================================================
spring.flyway.locations=classpath:db/migration
spring.flyway.enabled=true

# =============================================================================
# Common RabbitMQ Configuration
# =============================================================================
spring.rabbitmq.virtual-host=/
spring.rabbitmq.connection-timeout=30000
spring.rabbitmq.requested-heartbeat=30

# =============================================================================
# Common Redis Configuration
# =============================================================================
spring.redis.database=6
spring.redis.timeout=2000ms

# =============================================================================
# Common Actuator Configuration
# =============================================================================
management.health.db.enabled=true
management.health.rabbit.enabled=true
management.health.redis.enabled=true

# =============================================================================
# Common JWT Configuration
# =============================================================================
security.jwt.issuer=aioutlet-auth-service
security.jwt.audience=aioutlet-order-processor-service

# =============================================================================
# Common Saga Configuration
# =============================================================================
saga.retry.backoffMultiplier=2

# =============================================================================
# Common Message Broker Configuration
# =============================================================================
messaging.exchange.type=topic
messaging.routing-key.order-created=order.created
messaging.routing-key.order-updated=order.updated
messaging.routing-key.order-cancelled=order.cancelled
messaging.routing-key.payment-processed=payment.processed
messaging.routing-key.payment-failed=payment.failed
messaging.routing-key.inventory-reserved=inventory.reserved
messaging.routing-key.inventory-failed=inventory.failed
messaging.routing-key.shipping-prepared=shipping.prepared
messaging.routing-key.shipping-failed=shipping.failed

# =============================================================================
# Common CORS Configuration
# =============================================================================
app.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
app.cors.allow-credentials=true
